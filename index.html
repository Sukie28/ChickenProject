<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken</title>
    <!-- 引入 Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入 jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
    	.total-amount {
            background-color: darkred;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 25px; !important
        }
        .btn-custom-height {
            height: 70px; /* 自訂按鈕高度 */
        }        
        .order-list-item {
            margin-bottom: 10px; /* 增加 orderList 內容的間距 */
        }
        
    </style>
</head>
<body style="background-color:black;">
    <div class="container">
        <div class="row">
            <!-- 第一個區塊 -->
            <div class="col-md-4">
                <div class="p-3 border bg-dark text-white">總計</div>
                <div class="p-3 border total-amount" id="totalAmount"></div>
                <div class="p-3 border bg-dark text-white" id="groupb"></div>
             	<div class="p-3  bg-dark text-white">
               		<button class="btn btn-warning btn-custom-height w-100" onclick="clearAll()">總清除</button>
                </div>
            
            </div>
            <!-- 第二個區塊 -->
            <div class="col-md-4">
                <div class="p-3 border bg-dark text-white" >已點清單</div>
                <div class="p-3 border bg-dark text-white"id="orderList"></div>
            </div>
            <!-- 第三個區塊 -->
            <div class="col-md-4">
                <div class="p-3 border bg-dark text-white">單價</div>
                <div class="row">
                    <div class="row" id="priceButtons"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入 Bootstrap JS (可選) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    	
        let totalAmount = 0;
        let itemCounts = {};

        function addItem(price) {
            // 更新已點清單
            const itemId = `item-${Date.now()}`;
            $('#orderList').append(`
                <div id="${itemId}" class="d-flex justify-content-between align-items-center order-list-item">
                    <span>${price}</span>
                    <button class="btn btn-danger btn-md" onclick="removeItem('${itemId}', ${price})">刪除</button>
                </div>
            `);
            // 更新總金額
            totalAmount += price;
            $("#totalAmount").text(totalAmount);
            
            // 更新金額種類及數量
            if (itemCounts[price]) {
                itemCounts[price]++;
            } else {
                itemCounts[price] = 1;
            }
            updateGroupb();
        }

        function removeItem(itemId, price) {
        	$(`#${itemId}`).remove();
            totalAmount -= price;
            $("#totalAmount").text(totalAmount);
            
            // 更新金額種類及數量
            if (itemCounts[price]) {
                itemCounts[price]--;
                if (itemCounts[price] === 0) {
                    delete itemCounts[price];
                }
            }
            updateGroupb();
        }
        
        
        function updateGroupb() {
        	let totalCount = 0;
            let groupbContent = '';
            for (const [price, count] of Object.entries(itemCounts)) {
            	totalCount += count;
            	groupbContent += `
                    <div class="d-flex justify-content-between">
                        <span>金額 ${price}</span>
                        <span>${count} 個</span>
                    </div>
                `;
            }
            groupbContent = `數量統計 ( ${totalCount} ):<br>` + groupbContent;
            $('#groupb').html(groupbContent);
        
        }
        
        function clearAll() {
            $('#orderList').empty();
            totalAmount = 0;
            itemCounts = {};
            $('#totalAmount').text(totalAmount);
            updateGroupb();
        }
        
        $(document).ready(function() {
            for (let price = 95; price >= 20; price -= 5) {
                $('#priceButtons').append(`
                    <div class="col-6">
                		<button class="btn btn-primary m-1 btn-lg w-100 btn-custom-height" onclick="addItem(${price})">${price}</button>
                    </div>
                `);
            }
        });
   </script>
</body>
</html>